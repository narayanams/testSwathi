@model List<TRAILSWEB.Models.Cart>

@{
    ViewBag.Title = "Purchase";
}

@section Styles {
<link href="~/Scripts/vendor/bootstrap/plugins/css/footable.bootstrap.min.css" rel="stylesheet" />
}

<div class="panel panel-primary">
    <div class="panel-heading">
        <h3 class="panel-title">Shopping Cart</h3>
    </div>
    <div class="panel-body">
        @if (!ViewData.ModelState.IsValid)
        {
            <div class="alert alert-danger">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                @Html.ValidationSummary()
            </div>
        }
        <div class="alert alert-info">
            Verify the contents of your Cart and click 'Proceed to checkout' when you are ready to continue.
        </div>
        <table id="shoppingCart" class="table table-striped" data-sorting="true" data-paging="true" data-paging-size="5">
            <thead>
                <tr>
                    <th>Item</th>
                    <th data-breakpoints="xs">Vehicle</th>
                    <th data-breakpoints="all" data-type="number">Year</th>
                    <th data-breakpoints="all">Color</th>
                    <th data-breakpoints="all">License Plate</th>
                    <th data-breakpoints="all">State Registered</th>
                    <th>Price</th>
                    <th data-type="html"></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    var vehicle = string.Format("{0} {1}", item.VehicleInfo.MakeSelected, item.VehicleInfo.ModelSelected);
                    <tr class="clickable">
                        <td>@item.TransponderDetail.ShortDescription</td>
                        <td>@vehicle</td>
                        <td>@item.VehicleInfo.YearSelected</td>
                        <td>@item.VehicleInfo.ColorSelected</td>
                        <td>@item.VehicleInfo.LicensePlateNumber</td>
                        <td>@item.VehicleInfo.LicenseStateSelected</td>
                        <td>@string.Format("{0:C}", item.TransponderDetail.Price)</td>
                        <td><button class="btn btn-danger btn-sm removeItemButton" data-license-plate="@item.VehicleInfo.LicensePlateNumber" title="Remove"><i class="fa fa-trash-o"></i></button></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="modal-footer default" style="border-top: 1px solid #337ab7;">
        @Html.ActionLink("Proceed to checkout", "Payment", null, new { @id = "goToCheckout", @class = "btn btn-success pull-right" })
    </div>
</div> <!-- // Shopping Cart -->

@section Scripts {
    <!-- Plugins -->
    <script src="~/Scripts/vendor/bootstrap/plugins/footable.min.js" type="text/javascript"></script>

    <script src="~/Scripts/controllers/sales/shoppingCartController.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(function () {
            // Initialize Cart
            $('#shoppingCart').footable();
        });
    </script>
}
